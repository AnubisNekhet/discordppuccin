// Wavy spotify
/* Credit to https://github.com/Comfy-Themes/Discord */
@use "sass:color";
[class*="userPopoutOuter-"] [class*="activity-"] {
  --listening: #{$green};
  --playing: #{$brand};
  --listening-test: #{$base};
  --wave-width: 283px;
  padding: 16px;
  margin-top: 25px;
  z-index: 1;

  [class*="text-"],
  [class*="textRow-"],
  [class*="anchor-"],
  [class*="activityName-"],
  [class*="headerText-"] {
    color: #{$base} !important;
  }

  [class*="buttonColor-"] {
    border: none;
    background-color: #{$base};
    box-shadow: 0 4px 15px #00000021;
    color: #{$text};
  }

  // Waves are back :D
  [class*="headerTextNormal-"]::before {
    content: "";
    position: absolute;
    height: 25px;
    z-index: 1;
    width: var(--wave-width);
    top: -25px;
    left: 0;
    background: var(--background-secondary);
    background: var(--profile-body-background-color);
    -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="284" height="25" viewBox="0 0 284 25"><path d="M283.999 15.2776C228.798 15.2776 211.243 -0.0317305 140.048 -0.000164877C69.0475 -0.000164877 51.2975 15.2776 8.58307e-06 15.2776V24.9998H284C284 24.9998 283.999 18.9392 283.999 15.2776Z"/></svg>');
    animation: animate2 8s linear infinite;
    animation-delay: 0s;
    opacity: 1;

    @keyframes animate2 {
      0% {
        -webkit-mask-position-x: 284px;
      }

      100% {
        -webkit-mask-position-x: 0;
      }
    }
  }

  // Playing
  &::before {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: -2;
    left: 0;
    top: 0;
    background: #{$brand};
    background: var(--playing);
    border-radius: 0 0 10px 10px;
  }

  &::after {
    content: "";
    position: absolute;
    height: 25px;
    z-index: 2;
    width: var(--wave-width);
    top: -24px;
    left: 0;
    background: #{$brand};
    -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="284" height="25" viewBox="0 0 284 25"><path d="M283.999 15.2776C228.798 15.2776 211.243 -0.0317305 140.048 -0.000164877C69.0475 -0.000164877 51.2975 15.2776 8.58307e-06 15.2776V24.9998H284C284 24.9998 283.999 18.9392 283.999 15.2776Z"/></svg>');
    animation: animate 6s linear infinite;
    animation-delay: 0s;
    opacity: 1;
  }

  // Spotify
  [class*="timeBarUserPopoutV2-"] {
    &::before {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: -1;
      left: 0;
      top: 0;
      background: #{$green};
      border-radius: 0 0 10px 10px;
    }

    &::after {
      content: "";
      position: absolute;
      height: 25px;
      width: var(--wave-width);
      top: -24px;
      left: 0;
      z-index: 3;
      background: #{$green};
      -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="284" height="25" viewBox="0 0 284 25"><path d="M283.999 15.2776C228.798 15.2776 211.243 -0.0317305 140.048 -0.000164877C69.0475 -0.000164877 51.2975 15.2776 8.58307e-06 15.2776V24.9998H284C284 24.9998 283.999 18.9392 283.999 15.2776Z"/></svg>');
      animation: animate 6s linear infinite;
      animation-delay: 0s;

      @keyframes animate {
        0% {
          -webkit-mask-position-x: 0;
        }

        100% {
          -webkit-mask-position-x: 284px;
        }
      }
    }

    [class*="barInner-3dHef4"] {
      background-color: var(--profile-body-background-color);
    }
  }

  [class*="platformIcon-"] {
    display: none;
  }

  [class*="headerText-"] {
    --header-primary: #{$base};
  }
}
:root {
  .bannerSVGWrapper-2CLfzN mask {
    display: none;
  }

  // -- Member popout --
  .userPopoutOuter-1OHwPL {
    max-height: unset !important;

    .userPopoutInner-nv9Y92 {
      max-height: unset !important;
    }

    // Banner
    .bannerSVGWrapper-2CLfzN {
      overflow: visible;
      min-height: 120px !important;

      foreignObject {
        mask: unset;
      }

      .banner-1YaD3N {
        -webkit-mask-image: linear-gradient(#000000a7, #000000a7);
        height: 120px;
      }

      .pencilContainer-18TrEJ {
        display: none;
      }

      &[viewBox="0 0 340 60"] foreignObject {
        transform: translateY(-30px);
      }
      &[viewBox="0 0 340 90"] foreignObject {
        transform: translateY(-15px);
      }
    }

    // Avatar
    .avatarWrapper-eenWra {
      top: 20px;
      left: 16px;

      circle {
        display: none;
      }

      .avatarHint-k7pYop {
        border-radius: 5px;

        foreignObject {
          mask: none;
        }
      }

      .avatarDecorationHint-3n-p6O {
        border-radius: 5px !important;
        top: 0;
        left: 0;
        width: 80px;
        height: 80px;

        foreignObject {
          mask: none;
        }
      }
    }

    // Username
    .userPopoutOverlayBackground-3A0Pcz {
      position: static;
      overflow: visible;
      margin: 16px;
      max-height: calc(100vh - 200px);

      .usernameSection-3FppkT {
        & > .copiableNameTag-3tf-II,
        & > div > .userText-1_v2Cq > .nickname-3P1RuO,
        & > div > .userText-1_v2Cq > .userTagNoNickname-h9Bh88 {
          position: absolute;
          top: 30px;
          left: 115px;
          z-index: 1;
          max-width: 200px;
          text-overflow: ellipsis;
          white-space: nowrap;
          overflow: hidden;
          display: block;

          & > span {
            word-break: unset;
            white-space: unset;
          }
        }
      }
    }
    .profileBadges-2pItdR:empty
      + .userPopoutOverlayBackground-3A0Pcz
      .nickname-3P1RuO {
      top: 20px;
    }

    // Badges
    .profileBadges-2pItdR {
      position: absolute;
      top: 60px;
      left: 110px;
      z-index: 1;
      background-color: #00000055;
    }

    // Body
    .userPopoutOverlayBackground-3A0Pcz {
      .scroller-15bIdk {
        padding-right: 12px !important;
        padding-left: 12px !important;
      }

      .section-28YDOf {
        padding-top: 0;
        padding-bottom: 12px;
      }

      // Nickname
      .userTagWithNickname-13lfvd {
        padding-top: 12px;
      }

      // Dividers
      .divider-2dDziJ {
        display: none;
      }

    }
  }

  // -- User modal --
  .userProfileModalOuter-2wdWjU {
    width: 700px;

    .userProfileModalInner-3dx9L9 {
      overflow: hidden;

      &::before {
        border-radius: 8px;
      }
    }

    .topSection-13QKHs {
      margin-bottom: 0;

      .bannerSVGWrapper-2CLfzN {
        min-height: 160px !important;

        &[viewBox="0 0 600 106"] {
          foreignObject {
            transform: translateY(-22px);
          }
        }

        .banner-1YaD3N {
          -webkit-mask-image: linear-gradient(#000000a7, #000000a7);
          height: 160px;
          border-radius: 0;
        }
      }

      .avatar-3QF_VA {
        top: -143px;
      }

      .headerTop-1PNKck {
        flex-direction: column;
        top: -100px;
        left: 155px;

        .badgeList-2aoHPw {
          padding: 3px;
          background-color: #00000055;
        }
      }
    }

    .userProfileModalOverlayBackground-2dAaBg {
      overflow: visible;

      .nameTag-35jqbZ {
        position: absolute;
        top: -150px;
        left: 140px;
        z-index: 1;
        font-size: 23px;
        font-weight: 600;
      }
    }

    // -- Activities --
    .activityProfileV2-1N7pee {
      padding: 16px;
      margin: 12px;
      border-radius: 5px;
      overflow: hidden;
      z-index: 1;

      .headerText-3g1XK9,
      .activityName-3YXl6e,
      .content-tXPNDw,
      .details-2-ciHo,
      .name-1-Q7l2,
      .nameNormal-2fPMD2,
      .nameWrap-3TyM52,
      .textLeft-1Noen0,
      .textRight-2IW704 {
        color: var(--background-primary);
        --header-primary: var(--background-primary);
      }

      .barInner-3dHef4 {
        background-color: var(--background-primary);
      }

      .button-TGAkj4 {
        border: none;
        background-color: #{rgba($base, 0.4)};
        box-shadow: 0 4px 15px #00000021;
        color: var(--background-primary);
      }

      // Playing
      .contentImagesProfileV2-2Z-K9I::after,
      .contentGameImageProfile-24ty00::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: -2;
        left: 0;
        top: 0;
        background: #{$brand};
      }

      // Spotify
      .timeBarProfileV2-14KewZ::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 100%;
        z-index: -1;
        left: 0;
        top: 0;
        background: #{$green};
      }
      .platformIcon-k3yytQ {
        display: none !important;
      }
    }

    // Connections
    .connectedAccountContainer-3aLMHJ {
      border: solid #000000;
      border-width: 1.2px 1.2px 3px 1.2px;
      border-radius: 4px;
      width: 296px;
      transition: 100ms;

      &:active {
        border-width: 1.2px 1.2px 1.2px 1.2px;
        transform: translateY(1px);
      }

      .connectedAccountIcon-3FdW8x {
        padding: 5px;
        border-radius: 4px;
      }
      .connectedAccountNameContainer-3e9mvO {
        margin-left: 13px;
      }
      .connectedAccountChildren-29Qmfl {
        margin-left: 56px;
      }
    }

    // Mutuals
    .listRow-2nO1T6 {
      margin: 0;
      padding: 8px 12px;
    }

    .pencilContainer-18TrEJ {
      display: none;
    }
  }

}
[class*="NonPremium"]:has([class*="bannerPremium"]) [class*="avatarPositionNormal"], [class*="PremiumWithoutBanner"]:has([class*="bannerPremium"]) [class*="avatarPositionPremiumNoBanner"] {
  top: 20px !important;
}
.usernameSection-3FppkT.usernameSection-3FppkT.usernameSection-3FppkT {
  .userTagDiscriminatorNoNickname-3dioAe {
    font-size: 70%;
    vertical-align: baseline;
    opacity: 80%;
  }
  .userTag-3A4Fw4 {
      word-break: break-all;
      width: calc(100% + 50px);
      max-height: 1.2em;
  }
}

/* Comfy Code, kanged from Comfy but modified be me so you gotta give me credit >:D */
/* Comfy-Style Spotify Player
 * Kanged and modified code from https://github.com/Comfy-Themes/Discord
 */
:root {
  --spotify-vencord-wave-width: 240px;
  --spotify-vencord-color: #{$brand};
  --spotify-vencord-text: #{hue($base) saturation($base) lightness($base)};
}
@keyframes spotifywave {
  0% {
    -webkit-mask-position-x: var(--spotify-vencord-wave-width);
  }

  100% {
    -webkit-mask-position-x: 0;
  }
}
#vc-spotify-player {
  &::before {
    content: "";
    position: absolute;
    height: 25px;
    z-index: 1;
    width: var(--spotify-vencord-wave-width);
    margin-top: -29px;
    left: 0;
    background: var(--spotify-vencord-color);
    -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="240" height="25" viewBox="0 0 284 25"><path d="M283.999 15.2776C228.798 15.2776 211.243 -0.0317305 140.048 -0.000164877C69.0475 -0.000164877 51.2975 15.2776 8.58307e-06 15.2776V24.9998H284C284 24.9998 283.999 18.9392 283.999 15.2776Z"/></svg>');
    animation: spotifywave 8s linear infinite;
    animation-delay: 0s;
    opacity: 1;
  }
  &#vc-spotify-player  {
    background: var(--spotify-vencord-color);
    border-bottom: none;
  }
  #vc-spotify-song-title#vc-spotify-song-title,
  .vc-spotify-ellipoverflow.vc-spotify-ellipoverflow,
  .vc-spotify-artist.vc-spotify-artist,
  .vc-spotify-album.vc-spotify-album, .vc-spotify-time-right, .vc-spotify-time-left  {
    color: hsla(var(--spotify-vencord-text)/1);
  }
  &#vc-spotify-player [class*="bar-"] {
    background: hsla(var(--spotify-vencord-text)/0.3);
  }
  &#vc-spotify-player [class*="barFill"] {
    background: hsla(var(--spotify-vencord-text)/0.7);
  }
  #vc-spotify-progress-bar>[class^=slider] [class^=grabber][class^=grabber] {
    background-color: var(--spotify-vencord-color);
    border-color: hsla(var(--spotify-vencord-text)/1);
    color: var(--interactive-normal);
    border-width: 2px;
    height: 8px !important;
    width: 8px !important;
  }
  /* The code below isn't really needed but it looks pretty :3 */
  .vc-spotify-shuffle-on.vc-spotify-shuffle-on,
  .vc-spotify-repeat-context.vc-spotify-repeat-context,
  .vc-spotify-repeat-track.vc-spotify-repeat-track,
  .vc-spotify-shuffle-on.vc-spotify-shuffle-on:hover,
  .vc-spotify-repeat-context.vc-spotify-repeat-context:hover,
  .vc-spotify-repeat-track.vc-spotify-repeat-track:hover {
    color: hsla(var(--spotify-vencord-text)/1);
  }
  .vc-spotify-repeat-off.vc-spotify-repeat-off.vc-spotify-repeat-off,
  .vc-spotify-shuffle-off.vc-spotify-shuffle-off.vc-spotify-shuffle-off {
    color: hsla(var(--spotify-vencord-text)/0.5);
  }
  .vc-spotify-button.vc-spotify-button {
    transition: background 0.1s;
    color: hsla(var(--spotify-vencord-text)/1);
  }
  .vc-spotify-button.vc-spotify-button:hover {
    background: hsla(var(--spotify-vencord-text)/0.3);
    color: hsla(var(--spotify-vencord-text)/1);
  }
}
[class*=wrapper-]:not(:empty) + #vc-spotify-player {
  margin-top: 27px;
}
[class*=panels-] [class*=wrapper-] [class*=container-] {
  border-bottom: none;
}
#vc-spotify-player + [class*=container-] {
  background: var(--spotify-vencord-color);
  [class*=button-][class*=button-][class*=button-],
  [class*=title-][class*=title-][class*=title-] {
    color: hsla(var(--spotify-vencord-text)/1);
  }
  [class*=subtext-] {
    color: hsla(var(--spotify-vencord-text)/0.7) !important;
  }
  [class*=withTagAsButton-]:hover,
  [class*=withTagless]:hover,
  [class*=button-][class*=enabled-]:hover {
    background-color: hsla(var(--spotify-vencord-text)/0.2);
  }
}
// dnd
#vc-spotify-player + [class*=container-] {
  rect[fill="#f23f43"],
  foreignObject[mask="url(#svg-mask-status-dnd)"] > div {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
    background-color: hsla(var(--spotify-vencord-text)/1) !important;
  }

  rect[fill="rgba(242, 63, 67, 1)"] {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
  }
  rect[fill="#23a55a"],
  foreignObject[mask="url(#svg-mask-status-online)"] > div,
  div[class^="dotOnline"],
  i[class^="statusOnline-"] {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
    background-color: hsla(var(--spotify-vencord-text)/1) !important;
  }

  rect[fill="rgba(35, 165, 90, 1)"] {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
  }

  // idle
  rect[fill="#f0b232"],
  foreignObject[mask="url(#svg-mask-status-idle)"] > div {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
    background-color: hsla(var(--spotify-vencord-text)/1) !important;
  }

  rect[fill="rgba(240, 178, 50, 1)"] {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
  }

  // offline
  rect[fill="#82858f"],
  foreignObject[mask="url(#svg-mask-status-offline)"] > div,
  foreignObject[mask="url(#svg-mask-status-offline)"] > rect,
  div[class^="dotOffline"],
  i[class^="statusOffline-"] {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
    background-color: hsla(var(--spotify-vencord-text)/1) !important;
  }

  rect[fill="rgba(130, 133, 143, 1)"] {
    fill: hsla(var(--spotify-vencord-text)/1) !important;
  }
}
[class*=panels-] [class*=activityPanel-] {
  border-bottom: none;
}
[class*=listeningAlong-] {
  padding-bottom: 24px !important;
}
.vc-spotify-comma.vc-spotify-comma {
  color: hsla(var(--spotify-vencord-text)/1);
}
